{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["_regeneratorRuntime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","key","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","record","result","__await","then","unwrapped","error","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","undefined","return","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","STARTSCALE","DRAWTOOL","MOVETOOL","API_HOST","colors","plotLineLow","x0","y0","x1","y1","drawFunc","dx","dy","yi","D","y","x","plotLineHigh","xi","colorTo32Uint","colorstring","parseInt","substring","colorToString","colornum","toString","padStart","Vector2D","_classCallCheck","_createClass","othervector","number","Map","data","image","dataview","imageview","numchunks","cellsize","canvas","offset","scale","chunkpixels","startpoint","Math","floor","_canvas$getBoundingCl","getBoundingClientRect","width","height","ceil","_setMatrix","_asyncToGenerator","_callee","dimn","start","lines","changeTranscodeTime","map_ver","coords","map_grid","j","coordsobj","_context","fetch","concat","headers","Accept","Content-Type","body","JSON","stringify","arrayBuffer","chunkbuffer","current","Date","now","Uint32Array","ArrayBuffer","byteLength","Uint32data","k","l","bmp_index","color","getDataIndex","finalcolor","a","b","relative_index","_x","_x2","_x3","_x4","_x5","_x6","apply","arguments","currentcell","AppWrapper","_React$Component","props","_this","_possibleConstructorReturn","_getPrototypeOf","tool_mode","debug_mode","show_stats","color_selected","stroke_radius","update","time","tot_time","num_updates","transcode","draw","cursorx","cursory","offsetx","offsety","chunkx","chunky","cxstart","cystart","cxend","cyend","showinfobox","strokecanvas","colorinput","strokecanvasRef","createRef","colorInputRef","changeToolMode","change_to","setState","changeColor","drawStrokeCanvas","isSelected","changeUpdateTime","new_time","changeDrawTime","changeCursorLoc","vector","changeOffsetLoc","changeChunkLoc","_inherits","_this2","document","style","overflow","fetchInitialParameters","addEventListener","e","handleKeyDown","toolmode","size","ctx","getContext","clearRect","fillStyle","fillRect","mapver","queryString","window","location","search","urlParams","URLSearchParams","has","get","console","log","filename","x2","y2","response","split","blob","pngblob","url","URL","createObjectURL","link","createElement","href","setAttribute","appendChild","click","parentNode","removeChild","_this3","React","className","onKeyDown","MapCanvas","Palette","position","right","fontSize","round","onClick","src","alt","flexDirection","alignItems","checked","onChange","defaultValue","target","mapDownload","visibility","opacity","pointerEvents","lineHeight","marginTop","marginBottom","Component","_React$Component2","_this4","drawLines","lastdraw","tempscale","cellpos","canvasRef","mapoffset","celloffset","cursorcurrent","lmousedown","rmousedown","mousepos","replacecanvas","is_updating","drawcache","_this5","resizeCanvas","setTimeout","updateCanvas","rawdata","json","maxoffsetradius","maxoffset","random","moveMap","event","rect","clientX","left","clientY","top","pos","end","transform","setTo","multipliedby","isupdate","_this6","doFill","mapoffset_x","mapoffset_y","imageData","ImageData","Uint8ClampedArray","imageSmoothingEnabled","rctx","putImageData","_canvas$getBoundingCl2","offset_x","offset_y","drawImage","beginPath","lineWidth","moveTo","lineTo","stroke","linearray","line","p1","p2","abs","plotLine","currentpos","_this6$map_grid$getCh","getChunkPosOffset","blockid","_updateCanvas","_callee2","tempupdatescale","_this$map_grid$getVal","linestosend","_this7","_context2","getValues","setMatrix","resetTransform","canvasscale","drawMap","shift","_canvas$getBoundingCl3","_window$devicePixelRa","devicePixelRatio","ratio","scalex","scaley","newcursorcurrent","getCursorPosition","newcurrentcell","getCurrentCell","isEqualTo","drawLine","drawobj","_this8","ref","cursor","getCursor","onContextMenu","preventDefault","onMouseDown","button","_this8$map_grid$getCh","dataindex","onMouseUp","onMouseMove","moveCursor","onMouseLeave","onWheel","newscale","deltaY","oldtempscale","scalenum","_React$Component3","_this9","map","index","backgroundColor","gap","border","App","reportWebVitals","onPerfEntry","Function","__webpack_require__","bind","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.4fd7c522.chunk.js","sourcesContent":["import './App.css';\nimport React, { createRef } from 'react';\n\n\nconst UPDATEPERIOD = 1000;\n\nconst CHUNKSIZE = 16;\n\nconst LOWESTSCALE = 3;\n\nconst STARTSCALE = 16;\n\nconst DRAWTOOL = 0;\nconst EYEDROPTOOL = 1;\nconst MOVETOOL = 2;\n\n// const RANDOM_LOCATION_MAX = 200;\n\nconst PRODUCTION = true;\n\nconst API_HOST = (PRODUCTION) ? \"https://devo.esz.us\" : \"http://localhost:3001\";\n\n\n\n\n\nconst colors = [\n    \"#000000\", // Black\n    \"#FFFFFF\", // White\n    \"#FF0000\", // Red\n    \"#00FF00\", // Green\n    \"#0000FF\", // Blue\n    \"#FFFF00\", // Yellow\n    \"#FF00FF\", // Magenta\n    \"#00FFFF\", // Cyan\n    \"#800000\", // Maroon\n    \"#008000\", // Olive\n    \"#000080\", // Navy\n    \"#808000\", // Olive Drab\n    \"#800080\", // Purple\n    \"#008080\", // Teal\n    \"#808080\", // Gray\n    \"#C0C0C0\", // Silver\n    \"#FFC0CB\", // Pink\n    \"#FFA07A\", // Light Salmon\n    \"#FF7F50\", // Coral\n    \"#FF6347\", // Tomato\n    \"#FF4500\", // Orange Red\n    \"#FF8C00\", // Dark Orange\n    \"#FFD700\", // Gold\n    \"#FFFFE0\", // Light Yellow\n    \"#EEE8AA\", // Pale Goldenrod\n    \"#ADFF2F\", // Green Yellow\n    \"#32CD32\", // Lime Green\n    \"#00FA9A\", // Medium Spring Green\n    \"#00CED1\", // Dark Turquoise\n    \"#6A5ACD\", // Slate Blue\n    \"#7B68EE\", // Medium Slate Blue\n    \"#FF69B4\", // Hot Pink\n    \"#8B4513\" // Saddle Brown\n  ];\n  \n\n\nfunction plotLineLow(x0, y0, x1, y1, drawFunc) {\n    let dx = x1 - x0;\n    let dy = y1 - y0;\n    let yi = 1;\n    if (dy < 0) {\n        yi = -1;\n        dy = -dy;\n    }\n    let D = (2 * dy) - dx;\n    let y = y0;\n\n    for (let x = x0;x<x1+1;x++) {\n        drawFunc(x, y);\n        if (D > 0) {\n            y = y + yi;\n            D = D + (2 * (dy - dx));\n        } else {\n            D = D + 2*dy;\n        }\n    }\n}\nfunction plotLineHigh(x0, y0, x1, y1, drawFunc) {\n    let dx = x1 - x0;\n    let dy = y1 - y0;\n    let xi = 1;\n    if (dx < 0) {\n        xi = -1;\n        dx = -dx;\n    }\n    let D = (2 * dx) - dy;\n    let x = x0;\n\n    for (let y = y0;y<y1+1;y++) {\n        drawFunc(x, y);\n        if (D > 0) {\n            x = x + xi;\n            D = D + (2 * (dx - dy));\n        } else {\n            D = D + 2*dx;\n        }\n    }\n}\n\nfunction plotLine(p1, p2, offset, drawFunc) {\n    \n    let x0 = p1.x+offset.x;\n    let y0 = p1.y+offset.y;\n    \n    let x1 = p2.x+offset.x;\n    let y1 = p2.y+offset.y;\n\n    if (x0===x1 && y0===y1) drawFunc(x0,y0);\n\n\n    if (Math.abs(y1 - y0) < Math.abs(x1 - x0)) {\n        if (x0 > x1) plotLineLow(x1, y1, x0, y0, drawFunc);\n        else plotLineLow(x0, y0, x1, y1, drawFunc);\n    }\n    else {\n        if (y0 > y1) plotLineHigh(x1, y1, x0, y0, drawFunc);\n        else plotLineHigh(x0, y0, x1, y1, drawFunc);\n    }\n}\n\n\nfunction colorTo32Uint(colorstring) {\n    return parseInt(colorstring.substring(1), 16);\n}\nfunction colorToString(colornum) {\n    return \"#\" + (colornum & 0x00FFFFFF).toString(16).padStart(6, '0');\n}\n\nclass Vector2D {\n    constructor(x,y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    transform(x,y) {\n        this.x += x;\n        this.y += y;\n    }\n\n    setTo(x,y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    isEqualTo(othervector) {\n        return (this.x===othervector.x && this.y===othervector.y);\n    }\n    notEqualTo(othervector) {\n        return (this.x!==othervector.x || this.y!==othervector.y);\n    }\n\n    positive() {\n        return (this.x >= 0 && this.y >=0);\n    }\n\n    multipliedby(number) {\n        return new Vector2D(this.x*number,this.y*number);\n    }\n    transformedby(x,y) {\n        return new Vector2D(this.x+x,this.y+y);\n    }\n}\n\n\nclass Map {\n    constructor() {\n        //the data returned by the server\n        this.data = null;\n        //the data formatted as an image bitmap\n        this.image = null;\n\n        this.dataview = null;\n        this.imageview = null;\n\n        this.numchunks = null;\n        this.cellsize = null;\n    }\n\n    getValues(canvas, offset, scale) {\n        let chunkpixels = CHUNKSIZE*scale;\n\n        let numchunks = new Vector2D(0,0);\n        let startpoint = new Vector2D(0,0);\n\n        startpoint.x = (offset.x === 0) ? 0 : Math.floor((-1*offset.x)/chunkpixels);\n        startpoint.y = (offset.y === 0) ? 0 : Math.floor((-1*offset.y)/chunkpixels);\n\n        const { width, height } = canvas.getBoundingClientRect();\n\n        numchunks.x = Math.ceil(width/chunkpixels)+1; // bit cheaty - should probs optimise\n        numchunks.y = Math.ceil(height/chunkpixels)+1;\n\n        return {startpoint, numchunks};\n    }\n\n    async setMatrix(dimn, start, lines, cellsize, changeTranscodeTime, map_ver) {\n\n        let coords = [];\n        let map_grid = this;\n\n        for (let i=0;i<dimn.x;i++) {\n            for (let j=0;j<dimn.y;j++) {\n                let coordsobj = { x: start.x+i, y: start.y+j };\n                coords.push(coordsobj);    \n            }\n        }\n        return new Promise(function(resolve, reject) {\n            fetch(`${API_HOST}/getchunks`,{\n                method: 'POST',\n                headers: {'Accept': 'application/octet-stream', 'Content-Type': 'application/json'},\n                body: JSON.stringify({coords:coords, lines:lines, map_ver:map_ver})\n            }).then((data)=>{\n                return data.arrayBuffer();\n            }).then((chunkbuffer) => {\n                \n                map_grid.numchunks = dimn;\n                let current = Date.now();\n\n                // const cellsize = 10;\n                map_grid.data = chunkbuffer;\n                map_grid.dataview = new Uint32Array(map_grid.data);\n\n                map_grid.image = new ArrayBuffer(chunkbuffer.byteLength*cellsize*cellsize);\n                map_grid.imageview = new Uint32Array(map_grid.image);\n\n                let Uint32data = new Uint32Array(chunkbuffer);\n                \n                for (let i=0;i<map_grid.numchunks.x;i++) {\n                    for (let j=0;j<map_grid.numchunks.y;j++) {\n                        for (let k=0;k<CHUNKSIZE;k++) {\n                            for (let l=0;l<CHUNKSIZE;l++) {\n                                let bmp_index = i*CHUNKSIZE*cellsize + j*map_grid.numchunks.x*(CHUNKSIZE*CHUNKSIZE)*cellsize*cellsize + k*cellsize + l*map_grid.numchunks.x*CHUNKSIZE*cellsize*cellsize;\n                                let alex_index = map_grid.getDataIndex(i,j,k,l);\n                                let color = Uint32data[alex_index];\n                                let finalcolor = ((color << 16)&0x00FF0000) | ((color)&0xFF00FF00) | ((color>>16)&0x000000FF);\n\n                                for (let a=0;a<cellsize;a++) {\n                                    for (let b=0;b<cellsize;b++) {\n                                        let relative_index = bmp_index + a + b*map_grid.numchunks.x*CHUNKSIZE*cellsize;\n                                        map_grid.imageview[relative_index] = finalcolor;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n                map_grid.cellsize = cellsize;\n                changeTranscodeTime(Date.now()-current);\n                resolve();\n            });\n        });\n    }\n\n    getChunkPosOffset(currentcell, startpoint) {\n        const i = Math.floor((currentcell.x/CHUNKSIZE))-startpoint.x;\n        const k = currentcell.x - (i+startpoint.x)*CHUNKSIZE;\n\n        const j = Math.floor((currentcell.y/CHUNKSIZE))-startpoint.y;\n        const l = currentcell.y - (j+startpoint.y)*CHUNKSIZE;\n\n\n        return {i, j, k, l};\n    }\n    getDataIndex(i,j,k,l) {\n        return i*(this.numchunks.y)*(CHUNKSIZE*CHUNKSIZE)+j*(CHUNKSIZE*CHUNKSIZE)+k*CHUNKSIZE+l;\n    }\n}\n\n\nclass AppWrapper extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            map_ver: null,\n            tool_mode: MOVETOOL,\n            debug_mode: false,\n            show_stats: true,\n            color_selected: 1672153, \n            stroke_radius:1,\n            update: {\n                time: 0,\n                tot_time: 0,\n                num_updates: 1\n            },\n            transcode: {\n                time: 0,\n                tot_time: 0,\n                num_updates: 1\n            },\n            draw: {\n                time: 0,\n                tot_time: 0,\n                num_updates: 1\n            },\n            cursorx: 0,\n            cursory: 0,\n            offsetx: 0,\n            offsety: 0,\n            chunkx: 0,\n            chunky: 0,\n\n            cxstart:0,\n            cystart:0,\n            cxend:0,\n            cyend:0,\n            showinfobox:true\n        };\n\n        this.strokecanvas = null;\n        this.colorinput = null;\n\n        this.strokecanvasRef = createRef();\n        this.colorInputRef = createRef();\n\n        this.changeToolMode = (change_to) => {\n            this.setState({tool_mode: change_to});\n        }\n\n        this.changeColor = (color) => {\n            this.setState({color_selected: color});\n            this.changeToolMode(DRAWTOOL);\n            this.colorinput.value = colorToString(color);\n            this.drawStrokeCanvas(color);\n        };\n        this.isSelected = (color) => {\n            if (typeof color === 'string') {\n                let out_num = colorTo32Uint(color);\n                return (out_num===this.state.color_selected);\n            }\n            else if (typeof color === 'number') {\n                return (color===this.state.color_selected);\n            }\n        };\n\n        this.changeUpdateTime = (new_time) => {\n            this.setState({update:{\n                time: new_time, \n                tot_time: this.state.update.tot_time+new_time, \n                num_updates: this.state.update.num_updates+1\n            }});\n        }\n        this.changeTranscodeTime = (new_time) => {\n            this.setState({transcode:{\n                time: new_time, \n                tot_time: this.state.transcode.tot_time+new_time, \n                num_updates: this.state.transcode.num_updates+1\n            }});\n        }\n        this.changeDrawTime = (new_time) => {\n            this.setState({draw:{\n                time: new_time, \n                tot_time: this.state.draw.tot_time+new_time, \n                num_updates: this.state.draw.num_updates+1\n            }});\n        }\n        this.changeCursorLoc = (vector) => {\n            this.setState({cursorx: vector.x,cursory: vector.y});\n        }\n        this.changeOffsetLoc = (vector) => {\n            this.setState({offsetx: vector.x,offsety: vector.y});\n        }\n        this.changeChunkLoc = (x,y) => {\n            this.setState({chunkx: x,chunky: y});\n        }\n    }\n\n    componentDidMount() {\n        document.body.style.overflow = \"hidden\"; // stops user from scrolling the page\n        this.fetchInitialParameters();\n        this.strokecanvas = this.strokecanvasRef.current;\n        this.colorinput = this.colorInputRef.current;\n        this.drawStrokeCanvas(this.state.color_selected);\n        document.addEventListener('keydown', (e)=>{this.handleKeyDown(e, this.changeToolMode)});\n    }\n\n    handleKeyDown(e, changeToolMode) {\n        let toolmode = null;\n        // console.log(e.key);\n        switch (e.key) {\n            case \"1\":\n            case \"d\":\n                toolmode = DRAWTOOL;\n                break;\n            case \"2\":\n            case \"e\":\n                toolmode = EYEDROPTOOL;\n                break;\n            case \"3\":\n            case \"m\":\n                toolmode = MOVETOOL;\n                break;\n            default:\n                break;\n        }\n        if (toolmode!==null) changeToolMode(toolmode);\n    }\n\n    drawStrokeCanvas(color) {\n        const cellsize = 50;\n        const size = (this.state.stroke_radius+2)*cellsize;\n        this.strokecanvas.width = size;\n        this.strokecanvas.height = size;\n\n        const ctx = this.strokecanvas.getContext('2d');\n        ctx.clearRect(0,0,this.strokecanvas.width,this.strokecanvas.height);\n        ctx.fillStyle = \"#ffffff\";\n        ctx.fillRect(0,0,this.strokecanvas.width,this.strokecanvas.height);\n\n        ctx.fillStyle = colorToString(color);\n        ctx.fillRect(cellsize, cellsize, cellsize,cellsize);\n    }\n\n    fetchInitialParameters() {\n\n        // mapver: 0 (default), a (mine)\n\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        let mapver;\n        if (urlParams.has('map')) mapver = urlParams.get('map');\n        else mapver = \"default\";\n\n        console.log(urlParams.has('map'), urlParams.get('map'));\n\n        this.setState({map_ver: mapver});\n\n    }\n\n    mapDownload() {\n        let filename;\n        let coordsobj = {x1:this.state.cxstart,y1:this.state.cystart,x2:this.state.cxend,y2:this.state.cyend, map_ver:this.state.map_ver};\n        if (coordsobj.x1>coordsobj.x2 || coordsobj.y1>coordsobj.y2) return;\n\n        fetch(`${API_HOST}/getimage`,{\n            method: 'POST',\n            headers: {'Accept': 'application/octet-stream', 'Content-Type': 'application/json'},\n            body: JSON.stringify(coordsobj)\n        }).then((response) => {\n            filename = response.headers.get('Content-Disposition').split('\"')[1];\n            return response.blob()\n        })\n        .then((pngblob) => {\n            const url = window.URL.createObjectURL(pngblob);\n            const link = document.createElement('a');\n            link.href = url;\n            link.setAttribute('download',filename);\n            document.body.appendChild(link);\n            link.click();\n            link.parentNode.removeChild(link);\n        });\n    }\n\n    render() {\n        return (\n            <div className='App-wrapper'\n            onKeyDown={(e)=>{\n                console.log(e.key);\n            }}\n            >\n                <MapCanvas \n                    toolmode={this.state.tool_mode}\n                    color_selected={this.state.color_selected}\n                    debug_mode={this.state.debug_mode}\n                    map_ver={this.state.map_ver}\n                    changeToolMode={this.changeToolMode}\n                    changeUpdateTime={this.changeUpdateTime}\n                    changeTranscodeTime={this.changeTranscodeTime}\n                    changeDrawTime={this.changeDrawTime}\n                    changeCursorLoc={this.changeCursorLoc}\n                    changeOffsetLoc={this.changeOffsetLoc}\n                    changeChunkLoc={this.changeChunkLoc}\n                    changeColor={this.changeColor}\n                />\n                <Palette \n                    isSelected={this.isSelected} \n                    changeColor={this.changeColor} \n                    color_selected={this.state.color_selected}\n                    strokecanvasRef={this.strokecanvasRef}\n                    colorInputRef={this.colorInputRef}\n                />\n                <div className='drawer primary flex'>\n                    {(this.state.show_stats)?(<div style={{position: `absolute`,right:`0.8vw`,fontSize:\"90%\"}}>\n                        ({this.state.update.time}ms, avg: {Math.round(this.state.update.tot_time/this.state.update.num_updates)}ms, {this.state.update.num_updates} updates)\n                        <br/>({this.state.transcode.time}ms, avg: {Math.round(this.state.transcode.tot_time/this.state.transcode.num_updates)}ms, {this.state.transcode.num_updates} transcodes);\n                        <br/>({this.state.draw.time}ms, avg: {Math.round(this.state.draw.tot_time/this.state.draw.num_updates)}ms, {this.state.draw.num_updates} draws)\n                        <br/>Screen Coords: ({this.state.offsetx},{this.state.offsety})\n                        <br/>Chunk Coords: ({this.state.chunkx},{this.state.chunky})\n                        <br/>Cursor Coords: ({this.state.cursorx},{this.state.cursory})\n                    </div>):null}\n\n                    <div\n                        className={`flex toolbutton` + (this.state.tool_mode===DRAWTOOL ? \"selected\" : \"\")}\n                        onClick={() => {this.changeToolMode(DRAWTOOL)}}\n                    ><img src={(this.state.tool_mode===DRAWTOOL) ? 'drawtoolselect.png' : 'drawtool.png'} alt='drawtool'/></div>\n                    <div\n                        className={`flex toolbutton` + (this.state.tool_mode===EYEDROPTOOL ? \"selected\" : \"\")}\n                        onClick={() => {this.changeToolMode(EYEDROPTOOL)}}\n                    ><img src={(this.state.tool_mode===EYEDROPTOOL) ? 'eyedroptoolselect.png' : 'eyedroptool.png'} alt='eyedroptool'/></div>\n                    <div\n                        className={`flex toolbutton` + (this.state.tool_mode===MOVETOOL ? \"selected\" : \"\")}\n                        onClick={() => {this.changeToolMode(MOVETOOL)}}\n                    ><img src={(this.state.tool_mode===MOVETOOL) ? 'movetoolselect.png' : 'movetool.png'} alt='movetool'/></div>\n                    \n\n                    <div className='flex' style={{flexDirection:\"column\", alignItems:\"start\"}}>\n                        <div><input checked={this.state.debug_mode} type={\"checkbox\"} onChange={()=>{this.setState({debug_mode:!this.state.debug_mode})}}></input> Show Chunk Borders&ensp;</div>\n                        <div><input checked={this.state.show_stats} type={\"checkbox\"} onChange={()=>{this.setState({show_stats:!this.state.show_stats})}}></input> Show Stats</div>\n                        <div className='showinfobutton' onClick={()=>this.setState({showinfobox:true})}>Show Info</div>\n                    </div>\n                    <table\n                        className={`download-wrapper flex`}\n                        // onClick={() => this.fileDownload()}\n                    ><tbody>\n                        <tr>\n                            <td>\n                                <p>from:&nbsp;</p><input defaultValue={\"0\"} type={\"number\"} style={{width:\"35px\"}} onChange={(e)=>this.setState({cxstart:parseInt(e.target.value)})}></input>\n                                <input defaultValue={\"0\"} type={\"number\"} style={{width:\"35px\"}} onChange={(e)=>this.setState({cystart:parseInt(e.target.value)})}></input>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <p>to:&nbsp;</p><input defaultValue={\"0\"} type={\"number\"} style={{width:\"35px\"}} onChange={(e)=>this.setState({cxend:parseInt(e.target.value)})}></input>\n                                <input defaultValue={\"0\"} type={\"number\"} style={{width:\"35px\"}} onChange={(e)=>this.setState({cyend:parseInt(e.target.value)})}></input>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <p >Save PNG:</p>\n                                <div className={`download-button flex`} onClick={() => this.mapDownload()}><img src='save.png' alt='save'/></div>\n                            </td>\n                        </tr>\n                    </tbody></table>\n                    {/* <div style={{width:\"100px\", height:\"100px\", backgroundColor:colorToString(this.state.color_selected)}}></div> */}\n                </div>\n                <div style={{\n                        visibility: (this.state.showinfobox) ? \"visible\" : \"hidden\", \n                        opacity: (this.state.showinfobox) ? 1 : 0,\n                        pointerEvents: (this.state.showinfobox) ? \"all\" : \"none\"\n                    }} className='infobox-wrapper primary flex'>\n                    <div className='infobox'>\n                        <div className='infoclose primary flex' onClick={()=>{this.setState({showinfobox:false})}}><img src='close.png' alt='close info'/></div>\n                        <div className='infotext-wrapper'>\n                            <h1 style={{lineHeight:\"140%\", fontSize: \"180%\"}}>Hi, welcome to the Pixel Art Canvas.</h1>\n                            <p>This is an infinite canvas of pixels, in which you can draw anything!</p><br/>\n                            <b style={{lineHeight:\"190%\"}}>On the toolbar below, there are 3 tools.</b>\n                            <ul>\n                                <li style={{marginTop:\"5px\",color:\"#FFE3E3\"}}>Use the move tool to navigate around the canvas by dragging it with the mouse. The canvas will load in procedurally as you move around.</li>\n                                <li style={{marginTop:\"5px\",color:\"#DEFFDE\"}}>Use the eyedrop tool to select a colour by hovering over a pixel with your desired colour and clicking. Your brush will now be set to that colour!</li>\n                                <li style={{marginTop:\"5px\",marginBottom:\"10px\",color:\"#E1F6FF\"}}>Use the draw tool to draw stuff. You can do this by moving the mouse while holding left click. You can also move the canvas while in draw mode by right clicking and dragging the canvas.</li>\n                            </ul>\n                            <b style={{lineHeight:\"190%\"}}>Use the scroll wheel to zoom in or out</b>\n                            <p>You can also select colours using the colour picker next to the brush display on the palette (right).</p><br/>\n                            <p>If you would like to save anything you draw, you can download a PNG of your drawing by entering the range of chunks you want to download into the PNG input box. (You can view chunk coordinates on the right hand side of the toolbar - labeled 'Chunk Coords', and you can view chunk borders by enabling 'Show Chunk Borders')</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nclass MapCanvas extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.drawLines = [];\n\n        this.lastdraw = 0;\n\n        this.scale = STARTSCALE;\n        this.tempscale = this.scale;\n\n        this.cellpos = {i:0,j:0,k:0,l:0};\n\n        this.map_grid = null;\n        this.canvasRef = createRef();\n    \n        this.mapoffset = new Vector2D(0,0);\n        this.celloffset = new Vector2D(0,0);\n        this.currentcell = new Vector2D(0,0);\n        this.startpoint = new Vector2D(0,0);\n\n        this.cursorcurrent = new Vector2D(0,0);\n        this.lmousedown = false;\n        this.rmousedown = false;\n        this.mousepos = new Vector2D(0,0);\n\n        this.canvas = null;\n        this.replacecanvas = null;\n\n        this.is_updating = false;\n        this.drawcache = [];\n    }\n\n\n    //Called after element's initialisation\n    componentDidMount() {\n        this.canvas = this.canvasRef.current;\n        this.replacecanvas = document.createElement('canvas');\n        this.map_grid = new Map();\n        this.resizeCanvas(this.canvas);\n        window.addEventListener('resize', ()=>this.resizeCanvas(this.canvas));\n        setTimeout(this.updateCanvas(), UPDATEPERIOD);\n\n        fetch(`${API_HOST}/getparams`,{\n            method: 'GET',\n            headers: {'Accept': 'application/json'},\n        }).then((rawdata)=>{\n            return rawdata.json();\n        }).then((data)=>{\n            console.log( typeof data);\n            let maxoffsetradius = data.maxoffset;\n            let x = -(Math.floor(Math.random() * maxoffsetradius))*this.scale;\n            let y = -(Math.floor(Math.random() * maxoffsetradius))*this.scale;\n            this.moveMap(this.mapoffset, new Vector2D(x,y));\n        });\n    }\n\n    getCursorPosition(event, canvas) {\n        const rect = canvas.getBoundingClientRect();\n        const x = event.clientX - rect.left;\n        const y = event.clientY - rect.top;\n        const pos = new Vector2D(x/(this.tempscale/this.scale),y/(this.tempscale/this.scale));\n        this.mousepos = pos;\n        return pos;\n    }\n\n    getCurrentCell() {\n        let x = Math.floor((this.cursorcurrent.x-this.mapoffset.x*this.scale)/(this.scale));\n        let y = Math.floor((this.cursorcurrent.y-this.mapoffset.y*this.scale)/(this.scale));\n        const pos = new Vector2D(x,y);\n        return pos;\n    }\n\n    moveMap(start, end) {\n        let x = (end.x-start.x)/this.scale;\n        let y = (end.y-start.y)/this.scale;\n        // console.log(x,y);\n        this.mapoffset.transform(x,y);\n        this.celloffset.setTo(Math.floor(this.mapoffset.x),Math.floor(this.mapoffset.y));\n        this.props.changeOffsetLoc(this.celloffset.multipliedby(-1));\n    }\n\n    drawMap (canvas, startpoint, isupdate) {\n        let start =  Date.now();\n        if (this.map_grid.image===null || this.map_grid.numchunks===null) return;\n        const cellsize = this.map_grid.cellsize;\n\n        let x,y;\n        let doFill = (i,j,k,l) => {\n\n            x = (((i+startpoint.x)*CHUNKSIZE+k))*(cellsize)+mapoffset_x;\n            y = (((j+startpoint.y)*CHUNKSIZE+l))*(cellsize)+mapoffset_y;\n            ctx.fillRect(x, y, cellsize, cellsize);\n            // console.log(x,y,cellapparentsize);\n        }\n\n        let length = this.map_grid.numchunks.x*CHUNKSIZE*cellsize;\n        if ((this.map_grid.image.byteLength*4)%length!==0) return;\n        let imageData = new ImageData(new Uint8ClampedArray(this.map_grid.image), length);\n\n        const ctx = canvas.getContext(\"2d\");\n        ctx.imageSmoothingEnabled = false;\n\n        const rctx = this.replacecanvas.getContext(\"2d\");\n        rctx.clearRect(0,0,this.replacecanvas.width, this.replacecanvas.height);\n        rctx.putImageData(imageData, 0, 0);\n\n        const { width, height } = canvas.getBoundingClientRect();\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.fillStyle = \"#ffffff\";\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n        let mapoffset_x = Math.floor(this.mapoffset.x*cellsize);\n        let mapoffset_y = Math.floor(this.mapoffset.y*cellsize);\n        let offset_x = startpoint.x*CHUNKSIZE*cellsize+mapoffset_x;\n        let offset_y = startpoint.y*CHUNKSIZE*cellsize+mapoffset_y;\n\n        {\n            ctx.drawImage(this.replacecanvas, offset_x, offset_y);\n            \n            if (this.props.debug_mode) {\n                ctx.beginPath();\n                for (let i=0;i<this.map_grid.numchunks.x;i++) {\n                    for (let j=0;j<this.map_grid.numchunks.y;j++) {\n                        x = (((i+startpoint.x)*CHUNKSIZE))*cellsize+mapoffset_x;\n                        y = (((j+startpoint.y)*CHUNKSIZE))*cellsize+mapoffset_y;\n    \n                        ctx.fillStyle = \"#000000\";\n                        ctx.lineWidth = 0.01*Math.floor(this.scale);\n                        ctx.moveTo(x, 0);\n                        ctx.lineTo(x, height);\n                        // ctx.stroke();\n                        ctx.moveTo(0, y);\n                        ctx.lineTo(width, y);\n                    }\n                }\n                ctx.stroke();\n            }\n\n            this.drawcache.forEach((linearray)=>{\n                linearray.forEach((line)=>{\n                    plotLine(line.p1, line.p2, line.offset, (x,y)=>{\n                        const currentpos = new Vector2D(x-line.offset.x,y-line.offset.y);\n                        const {i, j, k, l} = this.map_grid.getChunkPosOffset(currentpos, this.startpoint);\n                        ctx.fillStyle = colorToString(line.blockid);\n                        doFill(i, j, k, l);\n                    });\n                })\n            });\n\n            if (this.props.toolmode===DRAWTOOL) {\n                // doFill(this.cellpos);\n                ctx.fillStyle = colorToString(this.props.color_selected)+\"ff\";\n                doFill(this.cellpos.i, this.cellpos.j, this.cellpos.k, this.cellpos.l);\n            }\n        };\n\n        this.props.changeDrawTime(Date.now()-start);\n    }\n\n    async updateCanvas() {\n        let start = Date.now(); // time testing\n\n        let tempupdatescale = Math.floor(this.tempscale);\n\n        let {startpoint, numchunks} = this.map_grid.getValues(this.canvas, this.mapoffset.multipliedby(tempupdatescale), tempupdatescale);\n        let linestosend = this.drawLines;\n        this.drawLines = [];\n        console.log(this.props.map_ver);\n        if (this.props.map_ver!==null) {\n            this.map_grid.setMatrix(numchunks, startpoint, linestosend, tempupdatescale, this.props.changeTranscodeTime, this.props.map_ver)\n            .then(()=>{\n                this.replacecanvas.width = tempupdatescale*numchunks.x*CHUNKSIZE;\n                this.replacecanvas.height = tempupdatescale*numchunks.y*CHUNKSIZE;    \n\n                this.canvas.getContext('2d').resetTransform();\n                this.resizeCanvas(this.canvas);\n                this.canvasscale(this.canvas, this.tempscale/tempupdatescale, this.tempscale/tempupdatescale)\n                this.scale = Math.floor(this.tempscale)\n                this.startpoint = startpoint;\n                this.drawMap(this.canvas, startpoint, true);\n\n                this.props.changeUpdateTime(Date.now()-start);\n            }).then(()=>{\n                // this.drawcache.forEach((draw) => {draw()});\n                this.drawcache.push([]);\n                if (this.drawcache.length>4) {\n                    this.drawcache.shift();\n                }\n                \n            });\n        }\n\n        setTimeout(()=>{this.updateCanvas()}, UPDATEPERIOD);\n    }\n\n    // stolen code lmao\n    resizeCanvas(canvas) {\n        const { width, height } = canvas.getBoundingClientRect();\n        \n        if (canvas.width !== width || canvas.height !== height) {\n          const { devicePixelRatio:ratio=1 } = window;\n          const context = canvas.getContext('2d');\n          canvas.width = (1*width*ratio);\n          canvas.height = (1*height*ratio);\n          context.scale(ratio, ratio);\n        //   console.log(ratio);\n        //   canvas.style.width = `${width}px`;\n        //   canvas.style.height = `${height}px`;\n          return true;\n        }\n    \n        return false\n    }\n\n    canvasscale(canvas, scalex, scaley) {\n        // let mousepos = this.mousepos;\n        const ctx = canvas.getContext('2d');\n        // const transx = mousepos.x;\n        // const transy = mousepos.y;\n        // ctx.translate(transx, transy);\n        ctx.scale(scalex, scaley);\n        // ctx.translate(-transx, -transy);\n    }\n\n    moveCursor(event) {\n        let update = false;\n        let newcursorcurrent = this.getCursorPosition(event, this.canvas);\n        if (this.rmousedown) {\n            this.moveMap(this.cursorcurrent, newcursorcurrent);\n            update = true;\n        }\n        this.cursorcurrent = newcursorcurrent;\n        let newcurrentcell = this.getCurrentCell();\n        // Drawing line and updating stats\n        if (!this.currentcell.isEqualTo(newcurrentcell)) {\n            if (this.lmousedown) this.drawLine(this.currentcell,newcurrentcell);\n            this.currentcell = newcurrentcell;\n            this.cellpos = this.map_grid.getChunkPosOffset(this.currentcell, this.startpoint);\n            this.props.changeCursorLoc(this.currentcell);\n            this.props.changeChunkLoc(this.cellpos.i+this.startpoint.x,this.cellpos.j+this.startpoint.y);\n            update = true;\n        }\n        return update;\n    }\n\n    drawLine(p1,p2) {\n        \n        let drawobj = {p1:p1,p2:p2,offset:this.celloffset,blockid:this.props.color_selected};\n        this.drawcache[this.drawcache.length-1].push(drawobj);\n        this.drawLines.push(drawobj);\n    }\n\n    render() {\n        let getCursor = ()=>{\n            switch (this.props.toolmode) {\n                case EYEDROPTOOL:\n                    return \"crosshair\";\n                case MOVETOOL:\n                    return \"move\";\n                default:\n                    return \"default\";\n            }\n        }\n        return (<div>\n            {/* <canvas ref={this.canvasRef2} style={{visibility:\"hidden\"}}></canvas> */}\n            <canvas \n                ref={this.canvasRef}\n                className='map-canvas primary'\n                style={{cursor:getCursor()}}\n                onContextMenu={(e) => {\n                    e.preventDefault();\n                }}\n                onMouseDown={(e) => {\n                    e.preventDefault();\n                    if (e.button === 0) {\n                        switch (this.props.toolmode) {\n                            case EYEDROPTOOL:\n                                console.log(\"eyedroptool used\");\n                                let {i,j,k,l} = this.map_grid.getChunkPosOffset(this.currentcell, this.startpoint);\n                                let dataindex = this.map_grid.getDataIndex(i,j,k,l);\n                                this.props.changeColor(this.map_grid.dataview[dataindex]);\n                                // this.props.changeToolMode(DRAWTOOL);\n                                break;\n                            case MOVETOOL:\n                                this.rmousedown=true;\n                                break;\n                            default:\n                                this.lmousedown=true;\n                                this.drawLine(this.currentcell,this.currentcell);\n                                this.drawMap(this.canvas, this.startpoint);\n                                break;\n                        }\n                    }\n                    else if (e.button === 2) {\n                        this.rmousedown=true;\n                    }\n                }}\n                onMouseUp={(e) => {\n                    this.lmousedown=false;\n                    this.rmousedown=false;\n                    this.drawMap(this.canvas, this.startpoint);\n                }}\n                onMouseMove={(e) => {\n                    if (this.moveCursor(e)) this.drawMap(this.canvas, this.startpoint);\n                }}\n                onMouseLeave={(e) => {\n                    this.moveCursor(e);\n                    this.lmousedown=false;\n                    this.rmousedown=false;\n                    this.drawMap(this.canvas, this.startpoint);\n                }}\n                onWheel={(e) => {\n                    let newscale = this.tempscale - Math.floor(e.deltaY)/100;\n                    // console.log(this.scale, this.tempscale);\n                    let oldtempscale = this.tempscale;\n                    if (newscale>LOWESTSCALE) this.tempscale = newscale;\n                    else this.tempscale = LOWESTSCALE;\n                    // console.log(this.tempscale);\n                    const scalenum = this.tempscale/oldtempscale;\n                    this.canvasscale(this.canvas, scalenum, scalenum);\n                    // this.scale = Math.floor(this.tempscale);\n                    \n                    this.drawMap(this.canvas, this.startpoint);\n                }}\n            ></canvas></div>\n        )\n    }\n}\n\n// needs to be fixed up - maybe add useEffect()\nclass Palette extends React.Component {\n    constructor(props) {\n        super(props);\n\n    }\n\n    render() {\n        return (\n            <div className='palette primary flex'>\n                <div className='color-wrapper flex'>\n                {\n                    colors.map((color,index) => (\n                        <div \n                            key={index} \n                            style={{backgroundColor: `${color}`}} \n                            className={`blockbutton` + ((colorToString(this.props.color_selected)===color) ? \"selected\" : \"\")}\n                            onClick={() => {this.props.changeColor(colorTo32Uint(color))}}\n                            //onClick={() => {console.log(button.blockid)}}\n                            ></div>\n                    ))\n                }\n                </div>\n                <div className=\"flex\" style={{flexDirection:\"row\", gap: \"5px\"}}>\n                    <canvas ref={this.props.strokecanvasRef} style={{width:\"10vmin\",height:\"10vmin\"}}></canvas>\n                    <input ref={this.props.colorInputRef} style={{width:\"40px\", height:\"10vmin\", border:\"none\"}} defaultValue={colorToString(this.props.color_selected)} type={\"color\"} onChange={(e)=>{this.props.changeColor(colorTo32Uint(e.target.value))}}></input>\n                </div>\n        </div>\n        )\n    }\n\n}\n\n\n\n\nfunction App() {\n  return (\n    <AppWrapper/>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}